apiVersion: servicemesh.cisco.com/v1alpha1
kind: IstioControlPlane
metadata:
  name: test-icp-v10x-sample
  namespace: istio-system
spec:
  version: 1.10.3
  k8s:
    resources:
      requests:
        cpu: 11m
        memory: 128Mi
      limits:
        cpu: 100m
        memory: 1Gi
    priorityClassName: high-priority
    imagePullPolicy: IfNotPresent
    imagePullSecrets:
      - name: private-registry-key
    env: []
    nodeSelector: {}
    affinity: {}
    securityContext: {}
    tolerations: []
    volumes: []
    volumeMounts: []
    replicas: {}
    podMetadata:
      labels: {}
      annotations: {}
  logging:
    level: "default:warning"
  mountMtlsCerts: true
  istiod:
    deployment:
      replicas:
        autoscaleEnabled: false
        min: 2
        max: 4
        count: 3
      image: "gcr.io/istio-release/pilot:1.10.3"
      resources:
        requests:
          cpu: 500m
          memory: 2048Mi
        limits:
          cpu: "1"
          memory: 4Gi
      nodeSelector:
        region: east
        type: user-node
      affinity: {}
      tolerations: []
      podMetadata:
        labels:
          version: v1
        annotations:
          foo: bar
      securityContext: {}
    enableAnalysis: true
    enableStatus: true
    externalIstiod:
      enabled: true
    traceSampling: 2.5
    enableProtocolSniffingOutbound: false
    enableProtocolSniffingInbound: false
    certProvider: KUBERNETES
    spiffe:
      operatorEndpoints:
        enabled: false
  proxy:
    image: "gcr.io/istio-release/proxyv2:1.10.3"
    privileged: true
    enableCoreDump: true
    logLevel: "ERROR"
    componentLogLevel: "misc:info"
    clusterDomain: "x.y.z"
    holdApplicationUntilProxyStarts: true
    lifecycle: {}
    resources:
      requests:
        cpu: 50m
        memory: 64Mi
      limits:
        cpu: 2000m
        memory: 1024Mi
    includeIPRanges: "172.30.0.0/16,172.20.0.0/16"
    excludeIPRanges: "172.40.0.0/16,172.30.0.0/16"
    excludeInboundPorts: "80,8080"
    excludeOutboundPorts: "81,8081"
  proxyInit:
    image: "gcr.io/istio-release/proxyv2:1.10.3"
    resources:
      limits:
        cpu: 2000m
        memory: 1024Mi
      requests:
        cpu: 11m
        memory: 11Mi
  telemetryV2:
    enabled: false
  sds:
    tokenAudience: "istio-ca"
  proxyWasm:
    enabled: false
  watchOneNamespace: true
  defaultPodDisruptionBudget:
    enabled: false
  jwtPolicy: "FIRST_PARTY_JWT"
  caAddress: "1.1.1.1"
  httpProxyEnvs:
    httpProxy: "http://proxy.example.com:3128"
    httpsProxy: "http://proxy.example.com:3129"
    noProxy: "svc,local"
  meshConfig:
    defaultConfig:
      meshId: mesh1
