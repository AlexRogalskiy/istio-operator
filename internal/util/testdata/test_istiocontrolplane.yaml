apiVersion: servicemesh.cisco.com/v1alpha1
kind: IstioControlPlane
metadata:
  name: test-icp-v10x-sample
  namespace: istio-system
spec:
  version: 1.10.3
  k8s:
    resources:
      requests:
        cpu: 10m
    priorityClassName: ""
    imagePullPolicy: ""
    imagePullSecrets: []
    env: []
    nodeSelector: {}
    affinity: {}
    securityContext: {}
    tolerations: []
    volumes: []
    volumeMounts: []
    replicas: {}
    podMetadata:
      labels: {}
      annotations: {}
  logging:
    level: "default:info"
  mountMtlsCerts: false
  istiod:
    deployment:
      replicas:
        autoscaleEnabled: true
        min: 1
        max: 5
        count: 1
      image: "gcr.io/istio-release/pilot:1.10.3"
      resources:
        requests:
          cpu: 500m
          memory: 2048Mi
      nodeSelector:
        region: east
        type: user-node
      affinity: {}
      tolerations: []
      podMetadata:
        labels: {}
        annotations:
          foo: bar
      securityContext: {}
    enableAnalysis: false
    enableStatus: false
    externalIstiod:
      enabled: false
    traceSampling: 1.0
    enableProtocolSniffingOutbound: true
    enableProtocolSniffingInbound: true
    certProvider: ISTIOD
    spiffe:
      operatorEndpoints:
        enabled: false
  proxy:
    image: "gcr.io/istio-release/proxyv2:1.10.3"
    privileged: false
    enableCoreDump: false
    logLevel: "WARNING"
    componentLogLevel: "misc:error"
    clusterDomain: "cluster.local"
    holdApplicationUntilProxyStarts: false
    lifecycle: {}
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 2000m
        memory: 1024Mi
    includeIPRanges: "*"
    excludeIPRanges: ""
    excludeInboundPorts: ""
    excludeOutboundPorts: ""
  proxyInit:
    image: "gcr.io/istio-release/proxyv2:1.10.3"
    resources:
      limits:
        cpu: 2000m
        memory: 1024Mi
      requests:
        cpu: 10m
        memory: 10Mi
  telemetryV2:
    enabled: true
  sds:
    tokenAudience: "istio-ca"
  proxyWasm:
    enabled: false
  watchOneNamespace: false
  defaultPodDisruptionBudget:
    enabled: true
  jwtPolicy: "THIRD_PARTY_JWT"
  caAddress: ""
  httpProxyEnvs:
    httpProxy: ""
    httpsProxy: ""
    noProxy: ""
  meshConfig:
    defaultConfig:
      meshId: cluster.local
